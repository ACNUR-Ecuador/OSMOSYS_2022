<p-card>
    <ng-template pTemplate="header">
        <div class="p-d-flex p-jc-center">
            <div class="p-mr-2"><h3 class="blue-title">Tus Proyectos</h3></div>
        </div>

        <div class="p-grid p-jc-center">
            <p-dropdown class="p-col-10" autoWidth="false" [style]="{'width':'90%'}"
                        (onChange)="loadProject($event.value)"
                        [options]="projects" [(ngModel)]="selectedProject"></p-dropdown>
        </div>

    </ng-template>
    <div class="layout-dashboard" *ngIf="renderProject">
        <p-card>
            <ng-template pTemplate="header">
                <div class="p-grid">
                    <div class="p-col-6">
                        <h6>Proyecto:</h6>
                        <h1 class="blue-title">{{selectedProject.name}}</h1>
                    </div>
                    <div class="p-col-6">
                        <h6>Socio:</h6>
                        <h1 class="blue-title">{{selectedProject.organization.description}}</h1>
                    </div>
                </div>
            </ng-template>
            <div class="p-grid">

                <div class="p-col-12 p-md-12 p-xl-12">
                    <h4 class="blue-title" style="text-align: center">Indicador General</h4>
                </div>
                <div class="p-col-12 p-md-6 p-xl-4">
                    <div class="card no-gutter widget-overview-box widget-overview-box-1">
                            <span class="overview-icon">
                                <i class="pi pi-users"></i>
                            </span>
                        <span class="overview-title">Beneficiarios</span>
                        <div class="p-grid overview-detail">
                            <div class="p-col-6">
                                <div
                                    class="overview-number">{{generalIndicator.totalExecution ? generalIndicator.totalExecution : 0}}</div>
                                <div class="overview-subtext">Reportados</div>
                            </div>
                            <div class="p-col-6">
                                <div class="overview-number">{{generalIndicator.target}}</div>
                                <div class="overview-subtext">Meta</div>
                            </div>
                        </div>
                    </div>
                    <div class="card no-gutter widget-overview-box widget-overview-box-1">
                            <span class="overview-icon">
                                <i class="pi pi-users"></i>
                            </span>
                        <span class="overview-title">Reportes</span>
                        <div class="p-grid overview-detail">
                            <div class="p-col-6">
                                <div
                                    [ngClass]="generalIndicatorLate?'late_text':''"
                                    class="overview-number">{{generalIndicator.lastReportedQuarter ? generalIndicator.lastReportedQuarter.quarter + '-' + generalIndicator.lastReportedQuarter.year : 'No reportado'}}</div>
                                <div class="overview-subtext">Último Trimestre reportado</div>
                            </div>
                            <div class="p-col-6">
                                <div
                                    [ngClass]="generalIndicatorLate?'late_text':''"
                                    class="overview-number">{{generalIndicator.lastReportedMonth ? generalIndicator.lastReportedMonth.month + '-' + generalIndicator.lastReportedMonth.year : 'No reportado'}}</div>
                                <div class="overview-subtext">Último Mes Reportado</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-col-12 p-xl-6">
                    <div class="card no-gutter orders">
                        <div class="p-grid">
                            <div class="p-col-12">
                            </div>
                            <div class="p-col-12">
                                <div class="overview-chart">
                                    <p-chart #chartBeneficiarios
                                             type="line"
                                             height="240"
                                             [data]="chartBeneficiariesMonths"
                                             [options]="chartBeneficiariesMonthsOptions"
                                             id="chartBeneficiarios"></p-chart>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-col-2 p-xl-2">
                    <div class="card no-gutter orders">
                        <div class="p-grid">
                            <div class="p-col-12">
                            </div>
                            <div class="p-col-12">
                                <div class="overview-chart">
                                    <p-chart #chartBeneficiariosTarget
                                             type="line"
                                             height="240"
                                             [data]="chartBeneficiariesTarget"
                                             [options]="chartBeneficiariesMonthsOptions"
                                             id="chartBeneficiariosTarget"></p-chart>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="p-grid">

                <div class="p-col-12 p-md-12 p-xl-12">
                    <h4 class="blue-title" style="text-align: center">Indicadores De Rendimiento</h4>
                </div>

                <div class="p-col-12 p-md-6 p-xl-6">
                    <div class="card no-gutter widget-overview-box widget-overview-box-2">
                            <span class="overview-icon">
                                <i class="pi pi-chart-line"></i>
                            </span>
                        <span class="overview-title">Indicadores de Rendimiento</span>
                        <div class="p-grid overview-detail">
                            <div class="p-col-6">
                                <div

                                    class="overview-number">{{countPerformanceIndicators}}</div>
                                <div class="overview-subtext">Indicadores Asignados</div>
                            </div>
                            <div class="p-col-6">
                                <div class="overview-number"
                                     [ngClass]="countPerformanceIndicatorsLate>0?'late_text':''"
                                >{{countPerformanceIndicatorsLate}}</div>
                                <div class="overview-subtext">Indicadores pendientes de reporte</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-col-12 p-md-6 p-xl-6">
                    <div class="card no-gutter widget-overview-box widget-overview-box-2">
                            <span class="overview-icon">
                                <i class="pi pi-chart-line"></i>
                            </span>
                        <span class="overview-title">Selecciona un Indicador de Rendimiento</span>
                        <div class="p-grid overview-detail">
                            <p-dropdown class="p-col-10" autoWidth="false" [style]="{'width':'90%'}"
                                        (onChange)="loadPerformanceIndicator($event.value)"
                                        [options]="performanceIndicatorsSelectList"
                                        [(ngModel)]="selectedPerformanceIndicator"></p-dropdown>
                        </div>
                    </div>
                </div>

                <div class="p-col-12 p-md-12 p-xl-12">
                    <div class="card no-gutter widget-overview-box widget-overview-box-2" style="text-align: center">
                            <span class="overview-icon">
                                <i class="pi pi-chart-line"></i>
                            </span>
                        <span *ngIf="selectedPerformanceIndicator"
                              class="overview-title"> {{'Indicador: '
                        + selectedPerformanceIndicator.indicator.code
                        + '-' + selectedPerformanceIndicator.indicator.description}}</span>
                    </div>
                    <div class="p-grid">
                        <div class="p-col-12 p-md-6 p-xl-4">
                            <div class="card no-gutter widget-overview-box widget-overview-box-1">
                            <span class="overview-icon">
                                <i class="pi pi-users"></i>
                            </span>
                                <span class="overview-title">Ejecución</span>
                                <div class="p-grid overview-detail" *ngIf="selectedPerformanceIndicator">
                                    <div class="p-col-6">
                                        <div
                                            class="overview-number">{{selectedPerformanceIndicator.totalExecution ? selectedPerformanceIndicator.totalExecution : 0}}</div>
                                        <div class="overview-subtext">Reportados</div>
                                    </div>
                                    <div class="p-col-6">
                                        <div class="overview-number">{{selectedPerformanceIndicator.target}}</div>
                                        <div class="overview-subtext">Meta</div>
                                    </div>
                                </div>
                            </div>
                            <div class="card no-gutter widget-overview-box widget-overview-box-1">
                            <span class="overview-icon">
                                <i class="pi pi-users"></i>
                            </span>
                                <span class="overview-title">Reportes</span>
                                <div class="p-grid overview-detail" *ngIf="selectedPerformanceIndicator">
                                    <div class="p-col-6">
                                        <div
                                            [ngClass]="generalIndicatorLate?'late_text':''"
                                            class="overview-number">{{selectedPerformanceIndicator.lastReportedQuarter ? selectedPerformanceIndicator.lastReportedQuarter.quarter + '-' + selectedPerformanceIndicator.lastReportedQuarter.year : 'No reportado'}}</div>
                                        <div class="overview-subtext">Último Trimestre reportado</div>
                                    </div>
                                    <div class="p-col-6">
                                        <div
                                            [ngClass]="generalIndicatorLate?'late_text':''"
                                            class="overview-number">{{selectedPerformanceIndicator.lastReportedMonth ? selectedPerformanceIndicator.lastReportedMonth.month + '-' + selectedPerformanceIndicator.lastReportedMonth.year : 'No reportado'}}</div>
                                        <div class="overview-subtext">Último Mes Reportado</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-col-12 p-xl-6">
                            <div class="card no-gutter orders">
                                <div class="p-grid">
                                    <div class="p-col-12">
                                    </div>
                                    <div class="p-col-12">
                                        <div class="overview-chart">
                                            <p-chart #chartPerformance
                                                     type="line"
                                                     height="240"
                                                     [data]="chartPerformanceMonths"
                                                     [options]="chartBeneficiariesMonthsOptions"
                                                     id="chartPerformance"></p-chart>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="p-col-2 p-xl-2">
                            <div class="card no-gutter orders">
                                <div class="p-grid">
                                    <div class="p-col-12">
                                    </div>
                                    <div class="p-col-12">
                                        <div class="overview-chart">
                                            <p-chart #chartBeneficiariosTarget
                                                     type="line"
                                                     height="240"
                                                     [data]="chartPerformanceTarget"
                                                     [options]="chartBeneficiariesMonthsOptions"
                                                     id="chartPerformanceTarget"></p-chart>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </p-card>
    </div>


</p-card>
